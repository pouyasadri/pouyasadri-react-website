{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parse = exports.base_parse = void 0;\nvar css_select_1 = require(\"css-select\");\nvar he_1 = __importDefault(require(\"he\"));\nvar back_1 = __importDefault(require(\"../back\"));\nvar matcher_1 = __importDefault(require(\"../matcher\"));\nvar void_tag_1 = __importDefault(require(\"../void-tag\"));\nvar comment_1 = __importDefault(require(\"./comment\"));\nvar node_1 = __importDefault(require(\"./node\"));\nvar text_1 = __importDefault(require(\"./text\"));\nvar type_1 = __importDefault(require(\"./type\"));\nfunction decode(val) {\n  // clone string\n  return JSON.parse(JSON.stringify(he_1.default.decode(val)));\n}\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\nvar Htags = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup'];\nvar Dtags = ['details', 'dialog', 'dd', 'div', 'dt'];\nvar Ftags = ['fieldset', 'figcaption', 'figure', 'footer', 'form'];\nvar tableTags = ['table', 'td', 'tr'];\nvar htmlTags = ['address', 'article', 'aside', 'blockquote', 'br', 'hr', 'li', 'main', 'nav', 'ol', 'p', 'pre', 'section', 'ul'];\nvar kBlockElements = new Set();\nfunction addToKBlockElement() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var addToSet = function (array) {\n    for (var index = 0; index < array.length; index++) {\n      var element = array[index];\n      kBlockElements.add(element);\n      kBlockElements.add(element.toUpperCase());\n    }\n  };\n  for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n    var arg = args_1[_a];\n    addToSet(arg);\n  }\n}\naddToKBlockElement(Htags, Dtags, Ftags, tableTags, htmlTags);\nvar DOMTokenList = /** @class */function () {\n  function DOMTokenList(valuesInit, afterUpdate) {\n    if (valuesInit === void 0) {\n      valuesInit = [];\n    }\n    if (afterUpdate === void 0) {\n      afterUpdate = function () {\n        return null;\n      };\n    }\n    this._set = new Set(valuesInit);\n    this._afterUpdate = afterUpdate;\n  }\n  DOMTokenList.prototype._validate = function (c) {\n    if (/\\s/.test(c)) {\n      throw new Error(\"DOMException in DOMTokenList.add: The token '\".concat(c, \"' contains HTML space characters, which are not valid in tokens.\"));\n    }\n  };\n  DOMTokenList.prototype.add = function (c) {\n    this._validate(c);\n    this._set.add(c);\n    this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  };\n  DOMTokenList.prototype.replace = function (c1, c2) {\n    this._validate(c2);\n    this._set.delete(c1);\n    this._set.add(c2);\n    this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  };\n  DOMTokenList.prototype.remove = function (c) {\n    this._set.delete(c) && this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  };\n  DOMTokenList.prototype.toggle = function (c) {\n    this._validate(c);\n    if (this._set.has(c)) this._set.delete(c);else this._set.add(c);\n    this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  };\n  DOMTokenList.prototype.contains = function (c) {\n    return this._set.has(c);\n  };\n  Object.defineProperty(DOMTokenList.prototype, \"length\", {\n    get: function () {\n      return this._set.size;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  DOMTokenList.prototype.values = function () {\n    return this._set.values();\n  };\n  Object.defineProperty(DOMTokenList.prototype, \"value\", {\n    get: function () {\n      return Array.from(this._set.values());\n    },\n    enumerable: false,\n    configurable: true\n  });\n  DOMTokenList.prototype.toString = function () {\n    return Array.from(this._set.values()).join(' ');\n  };\n  return DOMTokenList;\n}();\n/**\n * HTMLElement, which contains a set of children.\n *\n * Note: this is a minimalist implementation, no complete tree\n *   structure provided (no parentNode, nextSibling,\n *   previousSibling etc).\n * @class HTMLElement\n * @extends {Node}\n */\nvar HTMLElement = /** @class */function (_super) {\n  __extends(HTMLElement, _super);\n  /**\n   * Creates an instance of HTMLElement.\n   * @param keyAttrs\tid and class attribute\n   * @param [rawAttrs]\tattributes in string\n   *\n   * @memberof HTMLElement\n   */\n  function HTMLElement(tagName, keyAttrs, rawAttrs, parentNode, range, voidTag, _parseOptions) {\n    if (rawAttrs === void 0) {\n      rawAttrs = '';\n    }\n    if (parentNode === void 0) {\n      parentNode = null;\n    }\n    if (voidTag === void 0) {\n      voidTag = new void_tag_1.default();\n    }\n    if (_parseOptions === void 0) {\n      _parseOptions = {};\n    }\n    var _this = _super.call(this, parentNode, range) || this;\n    _this.rawAttrs = rawAttrs;\n    _this.voidTag = voidTag;\n    /**\n     * Node Type declaration.\n     */\n    _this.nodeType = type_1.default.ELEMENT_NODE;\n    _this.rawTagName = tagName;\n    _this.rawAttrs = rawAttrs || '';\n    _this.id = keyAttrs.id || '';\n    _this.childNodes = [];\n    _this._parseOptions = _parseOptions;\n    _this.classList = new DOMTokenList(keyAttrs.class ? keyAttrs.class.split(/\\s+/) : [], function (classList) {\n      return _this.setAttribute('class', classList.toString());\n    } // eslint-disable-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call\n    );\n    if (keyAttrs.id) {\n      if (!rawAttrs) {\n        _this.rawAttrs = \"id=\\\"\".concat(keyAttrs.id, \"\\\"\");\n      }\n    }\n    if (keyAttrs.class) {\n      if (!rawAttrs) {\n        var cls = \"class=\\\"\".concat(_this.classList.toString(), \"\\\"\");\n        if (_this.rawAttrs) {\n          _this.rawAttrs += \" \".concat(cls);\n        } else {\n          _this.rawAttrs = cls;\n        }\n      }\n    }\n    return _this;\n  }\n  /**\n   * Quote attribute values\n   * @param attr attribute value\n   * @returns {string} quoted value\n   */\n  HTMLElement.prototype.quoteAttribute = function (attr) {\n    if (attr == null) {\n      return 'null';\n    }\n    return JSON.stringify(attr.replace(/\"/g, '&quot;')).replace(/\\\\t/g, '\\t').replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r').replace(/\\\\/g, '');\n  };\n  /**\n   * Remove Child element from childNodes array\n   * @param {HTMLElement} node     node to remove\n   */\n  HTMLElement.prototype.removeChild = function (node) {\n    this.childNodes = this.childNodes.filter(function (child) {\n      return child !== node;\n    });\n    return this;\n  };\n  /**\n   * Exchanges given child with new child\n   * @param {HTMLElement} oldNode     node to exchange\n   * @param {HTMLElement} newNode     new node\n   */\n  HTMLElement.prototype.exchangeChild = function (oldNode, newNode) {\n    var children = this.childNodes;\n    this.childNodes = children.map(function (child) {\n      if (child === oldNode) {\n        return newNode;\n      }\n      return child;\n    });\n    return this;\n  };\n  Object.defineProperty(HTMLElement.prototype, \"tagName\", {\n    get: function () {\n      return this.rawTagName ? this.rawTagName.toUpperCase() : this.rawTagName;\n    },\n    set: function (newname) {\n      this.rawTagName = newname.toLowerCase();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"localName\", {\n    get: function () {\n      return this.rawTagName.toLowerCase();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"isVoidElement\", {\n    get: function () {\n      return this.voidTag.isVoidElement(this.localName);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"rawText\", {\n    /**\n     * Get escpaed (as-it) text value of current node and its children.\n     * @return {string} text content\n     */\n    get: function () {\n      // https://github.com/taoqf/node-html-parser/issues/249\n      if (/^br$/i.test(this.rawTagName)) {\n        return '\\n';\n      }\n      return this.childNodes.reduce(function (pre, cur) {\n        return pre += cur.rawText;\n      }, '');\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"textContent\", {\n    get: function () {\n      return decode(this.rawText);\n    },\n    set: function (val) {\n      var content = [new text_1.default(val, this)];\n      this.childNodes = content;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"text\", {\n    /**\n     * Get unescaped text value of current node and its children.\n     * @return {string} text content\n     */\n    get: function () {\n      return decode(this.rawText);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"structuredText\", {\n    /**\n     * Get structured Text (with '\\n' etc.)\n     * @return {string} structured text\n     */\n    get: function () {\n      var currentBlock = [];\n      var blocks = [currentBlock];\n      function dfs(node) {\n        if (node.nodeType === type_1.default.ELEMENT_NODE) {\n          if (kBlockElements.has(node.rawTagName)) {\n            if (currentBlock.length > 0) {\n              blocks.push(currentBlock = []);\n            }\n            node.childNodes.forEach(dfs);\n            if (currentBlock.length > 0) {\n              blocks.push(currentBlock = []);\n            }\n          } else {\n            node.childNodes.forEach(dfs);\n          }\n        } else if (node.nodeType === type_1.default.TEXT_NODE) {\n          if (node.isWhitespace) {\n            // Whitespace node, postponed output\n            currentBlock.prependWhitespace = true;\n          } else {\n            var text = node.trimmedText;\n            if (currentBlock.prependWhitespace) {\n              text = \" \".concat(text);\n              currentBlock.prependWhitespace = false;\n            }\n            currentBlock.push(text);\n          }\n        }\n      }\n      dfs(this);\n      return blocks.map(function (block) {\n        return block.join('').replace(/\\s{2,}/g, ' '); // Normalize each line's whitespace\n      }).join('\\n').replace(/\\s+$/, ''); // trimRight;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  HTMLElement.prototype.toString = function () {\n    var tag = this.rawTagName;\n    if (tag) {\n      var attrs = this.rawAttrs ? \" \".concat(this.rawAttrs) : '';\n      return this.voidTag.formatNode(tag, attrs, this.innerHTML);\n    }\n    return this.innerHTML;\n  };\n  Object.defineProperty(HTMLElement.prototype, \"innerHTML\", {\n    get: function () {\n      return this.childNodes.map(function (child) {\n        return child.toString();\n      }).join('');\n    },\n    set: function (content) {\n      var r = parse(content, this._parseOptions);\n      var nodes = r.childNodes.length ? r.childNodes : [new text_1.default(content, this)];\n      resetParent(nodes, this);\n      resetParent(this.childNodes, null);\n      this.childNodes = nodes;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  HTMLElement.prototype.set_content = function (content, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (content instanceof node_1.default) {\n      content = [content];\n    } else if (typeof content == 'string') {\n      options = __assign(__assign({}, this._parseOptions), options);\n      var r = parse(content, options);\n      content = r.childNodes.length ? r.childNodes : [new text_1.default(r.innerHTML, this)];\n    }\n    resetParent(this.childNodes, null);\n    resetParent(content, this);\n    this.childNodes = content;\n    return this;\n  };\n  HTMLElement.prototype.replaceWith = function () {\n    var _this = this;\n    var nodes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      nodes[_i] = arguments[_i];\n    }\n    var parent = this.parentNode;\n    var content = nodes.map(function (node) {\n      if (node instanceof node_1.default) {\n        return [node];\n      } else if (typeof node == 'string') {\n        var r = parse(node, _this._parseOptions);\n        return r.childNodes.length ? r.childNodes : [new text_1.default(node, _this)];\n      }\n      return [];\n    }).flat();\n    var idx = parent.childNodes.findIndex(function (child) {\n      return child === _this;\n    });\n    resetParent([this], null);\n    parent.childNodes = __spreadArray(__spreadArray(__spreadArray([], parent.childNodes.slice(0, idx), true), resetParent(content, parent), true), parent.childNodes.slice(idx + 1), true);\n    return this;\n  };\n  Object.defineProperty(HTMLElement.prototype, \"outerHTML\", {\n    get: function () {\n      return this.toString();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * Trim element from right (in block) after seeing pattern in a TextNode.\n   * @param  {RegExp} pattern pattern to find\n   * @return {HTMLElement}    reference to current node\n   */\n  HTMLElement.prototype.trimRight = function (pattern) {\n    for (var i = 0; i < this.childNodes.length; i++) {\n      var childNode = this.childNodes[i];\n      if (childNode.nodeType === type_1.default.ELEMENT_NODE) {\n        childNode.trimRight(pattern);\n      } else {\n        var index = childNode.rawText.search(pattern);\n        if (index > -1) {\n          childNode.rawText = childNode.rawText.substr(0, index);\n          // trim all following nodes.\n          this.childNodes.length = i + 1;\n        }\n      }\n    }\n    return this;\n  };\n  Object.defineProperty(HTMLElement.prototype, \"structure\", {\n    /**\n     * Get DOM structure\n     * @return {string} structure\n     */\n    get: function () {\n      var res = [];\n      var indention = 0;\n      function write(str) {\n        res.push('  '.repeat(indention) + str);\n      }\n      function dfs(node) {\n        var idStr = node.id ? \"#\".concat(node.id) : '';\n        var classStr = node.classList.length ? \".\".concat(node.classList.value.join('.')) : ''; // eslint-disable-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions, @typescript-eslint/no-unsafe-call\n        write(\"\".concat(node.rawTagName).concat(idStr).concat(classStr));\n        indention++;\n        node.childNodes.forEach(function (childNode) {\n          if (childNode.nodeType === type_1.default.ELEMENT_NODE) {\n            dfs(childNode);\n          } else if (childNode.nodeType === type_1.default.TEXT_NODE) {\n            if (!childNode.isWhitespace) {\n              write('#text');\n            }\n          }\n        });\n        indention--;\n      }\n      dfs(this);\n      return res.join('\\n');\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * Remove whitespaces in this sub tree.\n   * @return {HTMLElement} pointer to this\n   */\n  HTMLElement.prototype.removeWhitespace = function () {\n    var _this = this;\n    var o = 0;\n    this.childNodes.forEach(function (node) {\n      if (node.nodeType === type_1.default.TEXT_NODE) {\n        if (node.isWhitespace) {\n          return;\n        }\n        node.rawText = node.trimmedRawText;\n      } else if (node.nodeType === type_1.default.ELEMENT_NODE) {\n        node.removeWhitespace();\n      }\n      _this.childNodes[o++] = node;\n    });\n    this.childNodes.length = o;\n    return this;\n  };\n  /**\n   * Query CSS selector to find matching nodes.\n   * @param  {string}         selector Simplified CSS selector\n   * @return {HTMLElement[]}  matching elements\n   */\n  HTMLElement.prototype.querySelectorAll = function (selector) {\n    return (0, css_select_1.selectAll)(selector, this, {\n      xmlMode: true,\n      adapter: matcher_1.default\n    });\n  };\n  /**\n   * Query CSS Selector to find matching node.\n   * @param  {string}         selector Simplified CSS selector\n   * @return {(HTMLElement|null)}    matching node\n   */\n  HTMLElement.prototype.querySelector = function (selector) {\n    return (0, css_select_1.selectOne)(selector, this, {\n      xmlMode: true,\n      adapter: matcher_1.default\n    });\n  };\n  /**\n   * find elements by their tagName\n   * @param {string} tagName the tagName of the elements to select\n   */\n  HTMLElement.prototype.getElementsByTagName = function (tagName) {\n    var upperCasedTagName = tagName.toUpperCase();\n    var re = [];\n    var stack = [];\n    var currentNodeReference = this;\n    var index = 0;\n    // index turns to undefined once the stack is empty and the first condition occurs\n    // which happens once all relevant children are searched through\n    while (index !== undefined) {\n      var child = void 0;\n      // make it work with sparse arrays\n      do {\n        child = currentNodeReference.childNodes[index++];\n      } while (index < currentNodeReference.childNodes.length && child === undefined);\n      // if the child does not exist we move on with the last provided index (which belongs to the parentNode)\n      if (child === undefined) {\n        currentNodeReference = currentNodeReference.parentNode;\n        index = stack.pop();\n        continue;\n      }\n      if (child.nodeType === type_1.default.ELEMENT_NODE) {\n        // https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName#syntax\n        if (tagName === '*' || child.tagName === upperCasedTagName) re.push(child);\n        // if children are existing push the current status to the stack and keep searching for elements in the level below\n        if (child.childNodes.length > 0) {\n          stack.push(index);\n          currentNodeReference = child;\n          index = 0;\n        }\n      }\n    }\n    return re;\n  };\n  /**\n   * find element by it's id\n   * @param {string} id the id of the element to select\n   * @returns {HTMLElement | null} the element with the given id or null if not found\n   */\n  HTMLElement.prototype.getElementById = function (id) {\n    var stack = [];\n    var currentNodeReference = this;\n    var index = 0;\n    // index turns to undefined once the stack is empty and the first condition occurs\n    // which happens once all relevant children are searched through\n    while (index !== undefined) {\n      var child = void 0;\n      // make it work with sparse arrays\n      do {\n        child = currentNodeReference.childNodes[index++];\n      } while (index < currentNodeReference.childNodes.length && child === undefined);\n      // if the child does not exist we move on with the last provided index (which belongs to the parentNode)\n      if (child === undefined) {\n        currentNodeReference = currentNodeReference.parentNode;\n        index = stack.pop();\n        continue;\n      }\n      if (child.nodeType === type_1.default.ELEMENT_NODE) {\n        if (child.id === id) {\n          return child;\n        }\n        ;\n        // if children are existing push the current status to the stack and keep searching for elements in the level below\n        if (child.childNodes.length > 0) {\n          stack.push(index);\n          currentNodeReference = child;\n          index = 0;\n        }\n      }\n    }\n    return null;\n  };\n  /**\n   * traverses the Element and its parents (heading toward the document root) until it finds a node that matches the provided selector string. Will return itself or the matching ancestor. If no such element exists, it returns null.\n   * @param selector a DOMString containing a selector list\n   * @returns {HTMLElement | null} the element with the given id or null if not found\n   */\n  HTMLElement.prototype.closest = function (selector) {\n    var mapChild = new Map();\n    var el = this;\n    var old = null;\n    function findOne(test, elems) {\n      var elem = null;\n      for (var i = 0, l = elems.length; i < l && !elem; i++) {\n        var el_1 = elems[i];\n        if (test(el_1)) {\n          elem = el_1;\n        } else {\n          var child = mapChild.get(el_1);\n          if (child) {\n            elem = findOne(test, [child]);\n          }\n        }\n      }\n      return elem;\n    }\n    while (el) {\n      mapChild.set(el, old);\n      old = el;\n      el = el.parentNode;\n    }\n    el = this;\n    while (el) {\n      var e = (0, css_select_1.selectOne)(selector, el, {\n        xmlMode: true,\n        adapter: __assign(__assign({}, matcher_1.default), {\n          getChildren: function (node) {\n            var child = mapChild.get(node);\n            return child && [child];\n          },\n          getSiblings: function (node) {\n            return [node];\n          },\n          findOne: findOne,\n          findAll: function () {\n            return [];\n          }\n        })\n      });\n      if (e) {\n        return e;\n      }\n      el = el.parentNode;\n    }\n    return null;\n  };\n  /**\n   * Append a child node to childNodes\n   * @param  {Node} node node to append\n   * @return {Node}      node appended\n   */\n  HTMLElement.prototype.appendChild = function (node) {\n    // remove the node from it's parent\n    node.remove();\n    this.childNodes.push(node);\n    node.parentNode = this;\n    return node;\n  };\n  Object.defineProperty(HTMLElement.prototype, \"firstChild\", {\n    /**\n     * Get first child node\n     * @return {Node | undefined} first child node; or undefined if none\n     */\n    get: function () {\n      return this.childNodes[0];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"lastChild\", {\n    /**\n     * Get last child node\n     * @return {Node | undefined} last child node; or undefined if none\n     */\n    get: function () {\n      return (0, back_1.default)(this.childNodes);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"attrs\", {\n    /**\n     * Get attributes\n     * @access private\n     * @return {Object} parsed and unescaped attributes\n     */\n    get: function () {\n      if (this._attrs) {\n        return this._attrs;\n      }\n      this._attrs = {};\n      var attrs = this.rawAttributes;\n      for (var key in attrs) {\n        var val = attrs[key] || '';\n        this._attrs[key.toLowerCase()] = decode(val);\n      }\n      return this._attrs;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"attributes\", {\n    get: function () {\n      var ret_attrs = {};\n      var attrs = this.rawAttributes;\n      for (var key in attrs) {\n        var val = attrs[key] || '';\n        ret_attrs[key] = decode(val);\n      }\n      return ret_attrs;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"rawAttributes\", {\n    /**\n     * Get escaped (as-is) attributes\n     * @return {Object} parsed attributes\n     */\n    get: function () {\n      if (this._rawAttrs) {\n        return this._rawAttrs;\n      }\n      var attrs = {};\n      if (this.rawAttrs) {\n        var re = /([a-zA-Z()[\\]#@$.?:][a-zA-Z0-9-_:()[\\]#]*)(?:\\s*=\\s*((?:'[^']*')|(?:\"[^\"]*\")|\\S+))?/g;\n        var match = void 0;\n        while (match = re.exec(this.rawAttrs)) {\n          var key = match[1];\n          var val = match[2] || null;\n          if (val && (val[0] === \"'\" || val[0] === \"\\\"\")) val = val.slice(1, val.length - 1);\n          attrs[key] = attrs[key] || val;\n        }\n      }\n      this._rawAttrs = attrs;\n      return attrs;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  HTMLElement.prototype.removeAttribute = function (key) {\n    var _this = this;\n    var attrs = this.rawAttributes;\n    delete attrs[key];\n    // Update this.attribute\n    if (this._attrs) {\n      delete this._attrs[key];\n    }\n    // Update rawString\n    this.rawAttrs = Object.keys(attrs).map(function (name) {\n      var val = _this.quoteAttribute(attrs[name]);\n      if (val === 'null' || val === '\"\"') return name;\n      return \"\".concat(name, \"=\").concat(val);\n    }).join(' ');\n    // Update this.id\n    if (key === 'id') {\n      this.id = '';\n    }\n    return this;\n  };\n  HTMLElement.prototype.hasAttribute = function (key) {\n    return key.toLowerCase() in this.attrs;\n  };\n  /**\n   * Get an attribute\n   * @return {string | undefined} value of the attribute; or undefined if not exist\n   */\n  HTMLElement.prototype.getAttribute = function (key) {\n    return this.attrs[key.toLowerCase()];\n  };\n  /**\n   * Set an attribute value to the HTMLElement\n   * @param {string} key The attribute name\n   * @param {string} value The value to set, or null / undefined to remove an attribute\n   */\n  HTMLElement.prototype.setAttribute = function (key, value) {\n    var _this = this;\n    if (arguments.length < 2) {\n      throw new Error(\"Failed to execute 'setAttribute' on 'Element'\");\n    }\n    var k2 = key.toLowerCase();\n    var attrs = this.rawAttributes;\n    for (var k in attrs) {\n      if (k.toLowerCase() === k2) {\n        key = k;\n        break;\n      }\n    }\n    attrs[key] = String(value);\n    // update this.attrs\n    if (this._attrs) {\n      this._attrs[k2] = decode(attrs[key]);\n    }\n    // Update rawString\n    this.rawAttrs = Object.keys(attrs).map(function (name) {\n      var val = _this.quoteAttribute(attrs[name]);\n      if (val === 'null' || val === '\"\"') return name;\n      return \"\".concat(name, \"=\").concat(val);\n    }).join(' ');\n    // Update this.id\n    if (key === 'id') {\n      this.id = value;\n    }\n    return this;\n  };\n  /**\n   * Replace all the attributes of the HTMLElement by the provided attributes\n   * @param {Attributes} attributes the new attribute set\n   */\n  HTMLElement.prototype.setAttributes = function (attributes) {\n    var _this = this;\n    // Invalidate current this.attributes\n    if (this._attrs) {\n      delete this._attrs;\n    }\n    // Invalidate current this.rawAttributes\n    if (this._rawAttrs) {\n      delete this._rawAttrs;\n    }\n    // Update rawString\n    this.rawAttrs = Object.keys(attributes).map(function (name) {\n      var val = attributes[name];\n      if (val === 'null' || val === '\"\"') return name;\n      return \"\".concat(name, \"=\").concat(_this.quoteAttribute(String(val)));\n    }).join(' ');\n    return this;\n  };\n  HTMLElement.prototype.insertAdjacentHTML = function (where, html) {\n    var _a, _b, _c;\n    var _this = this;\n    if (arguments.length < 2) {\n      throw new Error('2 arguments required');\n    }\n    var p = parse(html, this._parseOptions);\n    if (where === 'afterend') {\n      var idx = this.parentNode.childNodes.findIndex(function (child) {\n        return child === _this;\n      });\n      resetParent(p.childNodes, this.parentNode);\n      (_a = this.parentNode.childNodes).splice.apply(_a, __spreadArray([idx + 1, 0], p.childNodes, false));\n    } else if (where === 'afterbegin') {\n      resetParent(p.childNodes, this);\n      (_b = this.childNodes).unshift.apply(_b, p.childNodes);\n    } else if (where === 'beforeend') {\n      p.childNodes.forEach(function (n) {\n        _this.appendChild(n);\n      });\n    } else if (where === 'beforebegin') {\n      var idx = this.parentNode.childNodes.findIndex(function (child) {\n        return child === _this;\n      });\n      resetParent(p.childNodes, this.parentNode);\n      (_c = this.parentNode.childNodes).splice.apply(_c, __spreadArray([idx, 0], p.childNodes, false));\n    } else {\n      throw new Error(\"The value provided ('\".concat(where, \"') is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'\"));\n    }\n    return this;\n    // if (!where || html === undefined || html === null) {\n    // \treturn;\n    // }\n  };\n  Object.defineProperty(HTMLElement.prototype, \"nextSibling\", {\n    get: function () {\n      if (this.parentNode) {\n        var children = this.parentNode.childNodes;\n        var i = 0;\n        while (i < children.length) {\n          var child = children[i++];\n          if (this === child) return children[i] || null;\n        }\n        return null;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"nextElementSibling\", {\n    get: function () {\n      if (this.parentNode) {\n        var children = this.parentNode.childNodes;\n        var i = 0;\n        var find = false;\n        while (i < children.length) {\n          var child = children[i++];\n          if (find) {\n            if (child instanceof HTMLElement) {\n              return child || null;\n            }\n          } else if (this === child) {\n            find = true;\n          }\n        }\n        return null;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"previousSibling\", {\n    get: function () {\n      if (this.parentNode) {\n        var children = this.parentNode.childNodes;\n        var i = children.length;\n        while (i > 0) {\n          var child = children[--i];\n          if (this === child) return children[i - 1] || null;\n        }\n        return null;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"previousElementSibling\", {\n    get: function () {\n      if (this.parentNode) {\n        var children = this.parentNode.childNodes;\n        var i = children.length;\n        var find = false;\n        while (i > 0) {\n          var child = children[--i];\n          if (find) {\n            if (child instanceof HTMLElement) {\n              return child || null;\n            }\n          } else if (this === child) {\n            find = true;\n          }\n        }\n        return null;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HTMLElement.prototype, \"classNames\", {\n    get: function () {\n      return this.classList.toString();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * Clone this Node\n   */\n  HTMLElement.prototype.clone = function () {\n    return parse(this.toString(), this._parseOptions).firstChild;\n  };\n  return HTMLElement;\n}(node_1.default);\nexports.default = HTMLElement;\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nvar kMarkupPattern = /<!--[\\s\\S]*?-->|<(\\/?)([a-zA-Z][-.:0-9_a-zA-Z]*)((?:\\s+[^>]*?(?:(?:'[^']*')|(?:\"[^\"]*\"))?)*)\\s*(\\/?)>/g;\nvar kAttributePattern = /(?:^|\\s)(id|class)\\s*=\\s*((?:'[^']*')|(?:\"[^\"]*\")|\\S+)/gi;\nvar kElementsClosedByOpening = {\n  li: {\n    li: true,\n    LI: true\n  },\n  LI: {\n    li: true,\n    LI: true\n  },\n  p: {\n    p: true,\n    div: true,\n    P: true,\n    DIV: true\n  },\n  P: {\n    p: true,\n    div: true,\n    P: true,\n    DIV: true\n  },\n  b: {\n    div: true,\n    DIV: true\n  },\n  B: {\n    div: true,\n    DIV: true\n  },\n  td: {\n    td: true,\n    th: true,\n    TD: true,\n    TH: true\n  },\n  TD: {\n    td: true,\n    th: true,\n    TD: true,\n    TH: true\n  },\n  th: {\n    td: true,\n    th: true,\n    TD: true,\n    TH: true\n  },\n  TH: {\n    td: true,\n    th: true,\n    TD: true,\n    TH: true\n  },\n  h1: {\n    h1: true,\n    H1: true\n  },\n  H1: {\n    h1: true,\n    H1: true\n  },\n  h2: {\n    h2: true,\n    H2: true\n  },\n  H2: {\n    h2: true,\n    H2: true\n  },\n  h3: {\n    h3: true,\n    H3: true\n  },\n  H3: {\n    h3: true,\n    H3: true\n  },\n  h4: {\n    h4: true,\n    H4: true\n  },\n  H4: {\n    h4: true,\n    H4: true\n  },\n  h5: {\n    h5: true,\n    H5: true\n  },\n  H5: {\n    h5: true,\n    H5: true\n  },\n  h6: {\n    h6: true,\n    H6: true\n  },\n  H6: {\n    h6: true,\n    H6: true\n  }\n};\nvar kElementsClosedByClosing = {\n  li: {\n    ul: true,\n    ol: true,\n    UL: true,\n    OL: true\n  },\n  LI: {\n    ul: true,\n    ol: true,\n    UL: true,\n    OL: true\n  },\n  a: {\n    div: true,\n    DIV: true\n  },\n  A: {\n    div: true,\n    DIV: true\n  },\n  b: {\n    div: true,\n    DIV: true\n  },\n  B: {\n    div: true,\n    DIV: true\n  },\n  i: {\n    div: true,\n    DIV: true\n  },\n  I: {\n    div: true,\n    DIV: true\n  },\n  p: {\n    div: true,\n    DIV: true\n  },\n  P: {\n    div: true,\n    DIV: true\n  },\n  td: {\n    tr: true,\n    table: true,\n    TR: true,\n    TABLE: true\n  },\n  TD: {\n    tr: true,\n    table: true,\n    TR: true,\n    TABLE: true\n  },\n  th: {\n    tr: true,\n    table: true,\n    TR: true,\n    TABLE: true\n  },\n  TH: {\n    tr: true,\n    table: true,\n    TR: true,\n    TABLE: true\n  }\n};\nvar frameflag = 'documentfragmentcontainer';\n/**\n * Parses HTML and returns a root element\n * Parse a chuck of HTML source.\n * @param  {string} data      html\n * @return {HTMLElement}      root element\n */\nfunction base_parse(data, options) {\n  var _a, _b;\n  if (options === void 0) {\n    options = {};\n  }\n  var voidTag = new void_tag_1.default((_a = options === null || options === void 0 ? void 0 : options.voidTag) === null || _a === void 0 ? void 0 : _a.closingSlash, (_b = options === null || options === void 0 ? void 0 : options.voidTag) === null || _b === void 0 ? void 0 : _b.tags);\n  var elements = options.blockTextElements || {\n    script: true,\n    noscript: true,\n    style: true,\n    pre: true\n  };\n  var element_names = Object.keys(elements);\n  var kBlockTextElements = element_names.map(function (it) {\n    return new RegExp(\"^\".concat(it, \"$\"), 'i');\n  });\n  var kIgnoreElements = element_names.filter(function (it) {\n    return Boolean(elements[it]);\n  }).map(function (it) {\n    return new RegExp(\"^\".concat(it, \"$\"), 'i');\n  });\n  function element_should_be_ignore(tag) {\n    return kIgnoreElements.some(function (it) {\n      return it.test(tag);\n    });\n  }\n  function is_block_text_element(tag) {\n    return kBlockTextElements.some(function (it) {\n      return it.test(tag);\n    });\n  }\n  var createRange = function (startPos, endPos) {\n    return [startPos - frameFlagOffset, endPos - frameFlagOffset];\n  };\n  var root = new HTMLElement(null, {}, '', null, [0, data.length], voidTag, options);\n  var currentParent = root;\n  var stack = [root];\n  var lastTextPos = -1;\n  var noNestedTagIndex = undefined;\n  var match;\n  // https://github.com/taoqf/node-html-parser/issues/38\n  data = \"<\".concat(frameflag, \">\").concat(data, \"</\").concat(frameflag, \">\");\n  var lowerCaseTagName = options.lowerCaseTagName,\n    fixNestedATags = options.fixNestedATags;\n  var dataEndPos = data.length - (frameflag.length + 2);\n  var frameFlagOffset = frameflag.length + 2;\n  while (match = kMarkupPattern.exec(data)) {\n    // Note: Object destructuring here consistently tests as higher performance than array destructuring\n    // eslint-disable-next-line prefer-const\n    var matchText = match[0],\n      leadingSlash = match[1],\n      tagName = match[2],\n      attributes = match[3],\n      closingSlash = match[4];\n    var matchLength = matchText.length;\n    var tagStartPos = kMarkupPattern.lastIndex - matchLength;\n    var tagEndPos = kMarkupPattern.lastIndex;\n    // Add TextNode if content\n    if (lastTextPos > -1) {\n      if (lastTextPos + matchLength < tagEndPos) {\n        var text = data.substring(lastTextPos, tagStartPos);\n        currentParent.appendChild(new text_1.default(text, currentParent, createRange(lastTextPos, tagStartPos)));\n      }\n    }\n    lastTextPos = kMarkupPattern.lastIndex;\n    // https://github.com/taoqf/node-html-parser/issues/38\n    // Skip frameflag node\n    if (tagName === frameflag) continue;\n    // Handle comments\n    if (matchText[1] === '!') {\n      if (options.comment) {\n        // Only keep what is in between <!-- and -->\n        var text = data.substring(tagStartPos + 4, tagEndPos - 3);\n        currentParent.appendChild(new comment_1.default(text, currentParent, createRange(tagStartPos, tagEndPos)));\n      }\n      continue;\n    }\n    /* -- Handle tag matching -- */\n    // Fix tag casing if necessary\n    if (lowerCaseTagName) tagName = tagName.toLowerCase();\n    // Handle opening tags (ie. <this> not </that>)\n    if (!leadingSlash) {\n      /* Populate attributes */\n      var attrs = {};\n      for (var attMatch = void 0; attMatch = kAttributePattern.exec(attributes);) {\n        var key = attMatch[1],\n          val = attMatch[2];\n        var isQuoted = val[0] === \"'\" || val[0] === \"\\\"\";\n        attrs[key.toLowerCase()] = isQuoted ? val.slice(1, val.length - 1) : val;\n      }\n      var parentTagName = currentParent.rawTagName;\n      if (!closingSlash && kElementsClosedByOpening[parentTagName]) {\n        if (kElementsClosedByOpening[parentTagName][tagName]) {\n          stack.pop();\n          currentParent = (0, back_1.default)(stack);\n        }\n      }\n      // Prevent nested A tags by terminating the last A and starting a new one : see issue #144\n      if (fixNestedATags && (tagName === 'a' || tagName === 'A')) {\n        if (noNestedTagIndex !== undefined) {\n          stack.splice(noNestedTagIndex);\n          currentParent = (0, back_1.default)(stack);\n        }\n        noNestedTagIndex = stack.length;\n      }\n      var tagEndPos_1 = kMarkupPattern.lastIndex;\n      var tagStartPos_1 = tagEndPos_1 - matchLength;\n      currentParent = currentParent.appendChild(\n      // Initialize range (end position updated later for closed tags)\n      new HTMLElement(tagName, attrs, attributes.slice(1), null, createRange(tagStartPos_1, tagEndPos_1), voidTag, options));\n      stack.push(currentParent);\n      if (is_block_text_element(tagName)) {\n        // Find closing tag\n        var closeMarkup = \"</\".concat(tagName, \">\");\n        var closeIndex = lowerCaseTagName ? data.toLocaleLowerCase().indexOf(closeMarkup, kMarkupPattern.lastIndex) : data.indexOf(closeMarkup, kMarkupPattern.lastIndex);\n        var textEndPos = closeIndex === -1 ? dataEndPos : closeIndex;\n        if (element_should_be_ignore(tagName)) {\n          var text = data.substring(tagEndPos_1, textEndPos);\n          if (text.length > 0 && /\\S/.test(text)) {\n            currentParent.appendChild(new text_1.default(text, currentParent, createRange(tagEndPos_1, textEndPos)));\n          }\n        }\n        if (closeIndex === -1) {\n          lastTextPos = kMarkupPattern.lastIndex = data.length + 1;\n        } else {\n          lastTextPos = kMarkupPattern.lastIndex = closeIndex + closeMarkup.length;\n          // Cause to be treated as self-closing, because no close found\n          leadingSlash = '/';\n        }\n      }\n    }\n    // Handle closing tags or self-closed elements (ie </tag> or <br>)\n    if (leadingSlash || closingSlash || voidTag.isVoidElement(tagName)) {\n      while (true) {\n        if (noNestedTagIndex != null && (tagName === 'a' || tagName === 'A')) noNestedTagIndex = undefined;\n        if (currentParent.rawTagName === tagName) {\n          // Update range end for closed tag\n          currentParent.range[1] = createRange(-1, Math.max(lastTextPos, tagEndPos))[1];\n          stack.pop();\n          currentParent = (0, back_1.default)(stack);\n          break;\n        } else {\n          var parentTagName = currentParent.tagName;\n          // Trying to close current tag, and move on\n          if (kElementsClosedByClosing[parentTagName]) {\n            if (kElementsClosedByClosing[parentTagName][tagName]) {\n              stack.pop();\n              currentParent = (0, back_1.default)(stack);\n              continue;\n            }\n          }\n          // Use aggressive strategy to handle unmatching markups.\n          break;\n        }\n      }\n    }\n  }\n  return stack;\n}\nexports.base_parse = base_parse;\n/**\n * Parses HTML and returns a root element\n * Parse a chuck of HTML source.\n */\nfunction parse(data, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var stack = base_parse(data, options);\n  var root = stack[0];\n  var _loop_1 = function () {\n    // Handle each error elements.\n    var last = stack.pop();\n    var oneBefore = (0, back_1.default)(stack);\n    if (last.parentNode && last.parentNode.parentNode) {\n      if (last.parentNode === oneBefore && last.tagName === oneBefore.tagName) {\n        // Pair error case <h3> <h3> handle : Fixes to <h3> </h3>\n        // this is wrong, becouse this will put the H3 outside the current right position which should be inside the current Html Element, see issue 152 for more info\n        if (options.parseNoneClosedTags !== true) {\n          oneBefore.removeChild(last);\n          last.childNodes.forEach(function (child) {\n            oneBefore.parentNode.appendChild(child);\n          });\n          stack.pop();\n        }\n      } else {\n        // Single error  <div> <h3> </div> handle: Just removes <h3>\n        // Why remove? this is already a HtmlElement and the missing <H3> is already added in this case. see issue 152 for more info\n        // eslint-disable-next-line no-lonely-if\n        if (options.parseNoneClosedTags !== true) {\n          oneBefore.removeChild(last);\n          last.childNodes.forEach(function (child) {\n            oneBefore.appendChild(child);\n          });\n        }\n      }\n    } else {\n      // If it's final element just skip.\n    }\n  };\n  while (stack.length > 1) {\n    _loop_1();\n  }\n  // response.childNodes.forEach((node) => {\n  // \tif (node instanceof HTMLElement) {\n  // \t\tnode.parentNode = null;\n  // \t}\n  // });\n  return root;\n}\nexports.parse = parse;\nfunction resetParent(nodes, parent) {\n  return nodes.map(function (node) {\n    node.parentNode = parent;\n    return node;\n  });\n}","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","pack","l","ar","slice","concat","__importDefault","mod","__esModule","defineProperty","exports","value","parse","base_parse","css_select_1","require","he_1","back_1","matcher_1","void_tag_1","comment_1","node_1","text_1","type_1","decode","val","JSON","stringify","default","Htags","Dtags","Ftags","tableTags","htmlTags","kBlockElements","Set","addToKBlockElement","args","_i","addToSet","array","index","element","add","toUpperCase","_a","args_1","arg","DOMTokenList","valuesInit","afterUpdate","_set","_afterUpdate","_validate","c","test","Error","replace","c1","c2","delete","remove","toggle","has","contains","get","size","enumerable","configurable","values","toString","join","HTMLElement","_super","tagName","keyAttrs","rawAttrs","parentNode","range","voidTag","_parseOptions","_this","nodeType","ELEMENT_NODE","rawTagName","id","childNodes","classList","class","split","setAttribute","cls","quoteAttribute","attr","removeChild","node","filter","child","exchangeChild","oldNode","newNode","children","map","set","newname","toLowerCase","isVoidElement","localName","reduce","pre","cur","rawText","content","currentBlock","blocks","dfs","push","forEach","TEXT_NODE","isWhitespace","prependWhitespace","text","trimmedText","block","tag","attrs","formatNode","innerHTML","r","nodes","resetParent","set_content","options","replaceWith","parent","flat","idx","findIndex","trimRight","pattern","childNode","search","substr","res","indention","write","str","repeat","idStr","classStr","removeWhitespace","o","trimmedRawText","querySelectorAll","selector","selectAll","xmlMode","adapter","querySelector","selectOne","getElementsByTagName","upperCasedTagName","re","stack","currentNodeReference","undefined","pop","getElementById","closest","mapChild","Map","el","old","findOne","elems","elem","el_1","e","getChildren","getSiblings","findAll","appendChild","_attrs","rawAttributes","key","ret_attrs","_rawAttrs","match","exec","removeAttribute","keys","name","hasAttribute","getAttribute","k2","k","setAttributes","attributes","insertAdjacentHTML","where","html","_b","_c","splice","unshift","find","clone","firstChild","kMarkupPattern","kAttributePattern","kElementsClosedByOpening","li","LI","div","P","DIV","B","td","th","TD","TH","h1","H1","h2","H2","h3","H3","h4","H4","h5","H5","h6","H6","kElementsClosedByClosing","ul","ol","UL","OL","a","A","I","tr","table","TR","TABLE","frameflag","data","closingSlash","tags","elements","blockTextElements","script","noscript","style","element_names","kBlockTextElements","it","RegExp","kIgnoreElements","Boolean","element_should_be_ignore","some","is_block_text_element","createRange","startPos","endPos","frameFlagOffset","root","currentParent","lastTextPos","noNestedTagIndex","lowerCaseTagName","fixNestedATags","dataEndPos","matchText","leadingSlash","matchLength","tagStartPos","lastIndex","tagEndPos","substring","comment","attMatch","isQuoted","parentTagName","tagEndPos_1","tagStartPos_1","closeMarkup","closeIndex","toLocaleLowerCase","indexOf","textEndPos","Math","max","_loop_1","last","oneBefore","parseNoneClosedTags"],"sources":["/Users/pouyasadri/pouyasari-react-master/node_modules/node-html-parser/dist/nodes/html.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parse = exports.base_parse = void 0;\nvar css_select_1 = require(\"css-select\");\nvar he_1 = __importDefault(require(\"he\"));\nvar back_1 = __importDefault(require(\"../back\"));\nvar matcher_1 = __importDefault(require(\"../matcher\"));\nvar void_tag_1 = __importDefault(require(\"../void-tag\"));\nvar comment_1 = __importDefault(require(\"./comment\"));\nvar node_1 = __importDefault(require(\"./node\"));\nvar text_1 = __importDefault(require(\"./text\"));\nvar type_1 = __importDefault(require(\"./type\"));\nfunction decode(val) {\n    // clone string\n    return JSON.parse(JSON.stringify(he_1.default.decode(val)));\n}\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\nvar Htags = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup'];\nvar Dtags = ['details', 'dialog', 'dd', 'div', 'dt'];\nvar Ftags = ['fieldset', 'figcaption', 'figure', 'footer', 'form'];\nvar tableTags = ['table', 'td', 'tr'];\nvar htmlTags = ['address', 'article', 'aside', 'blockquote', 'br', 'hr', 'li', 'main', 'nav', 'ol', 'p', 'pre', 'section', 'ul'];\nvar kBlockElements = new Set();\nfunction addToKBlockElement() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var addToSet = function (array) {\n        for (var index = 0; index < array.length; index++) {\n            var element = array[index];\n            kBlockElements.add(element);\n            kBlockElements.add(element.toUpperCase());\n        }\n    };\n    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n        var arg = args_1[_a];\n        addToSet(arg);\n    }\n}\naddToKBlockElement(Htags, Dtags, Ftags, tableTags, htmlTags);\nvar DOMTokenList = /** @class */ (function () {\n    function DOMTokenList(valuesInit, afterUpdate) {\n        if (valuesInit === void 0) { valuesInit = []; }\n        if (afterUpdate === void 0) { afterUpdate = function () { return null; }; }\n        this._set = new Set(valuesInit);\n        this._afterUpdate = afterUpdate;\n    }\n    DOMTokenList.prototype._validate = function (c) {\n        if (/\\s/.test(c)) {\n            throw new Error(\"DOMException in DOMTokenList.add: The token '\".concat(c, \"' contains HTML space characters, which are not valid in tokens.\"));\n        }\n    };\n    DOMTokenList.prototype.add = function (c) {\n        this._validate(c);\n        this._set.add(c);\n        this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n    };\n    DOMTokenList.prototype.replace = function (c1, c2) {\n        this._validate(c2);\n        this._set.delete(c1);\n        this._set.add(c2);\n        this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n    };\n    DOMTokenList.prototype.remove = function (c) {\n        this._set.delete(c) && this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n    };\n    DOMTokenList.prototype.toggle = function (c) {\n        this._validate(c);\n        if (this._set.has(c))\n            this._set.delete(c);\n        else\n            this._set.add(c);\n        this._afterUpdate(this); // eslint-disable-line @typescript-eslint/no-unsafe-call\n    };\n    DOMTokenList.prototype.contains = function (c) {\n        return this._set.has(c);\n    };\n    Object.defineProperty(DOMTokenList.prototype, \"length\", {\n        get: function () {\n            return this._set.size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DOMTokenList.prototype.values = function () {\n        return this._set.values();\n    };\n    Object.defineProperty(DOMTokenList.prototype, \"value\", {\n        get: function () {\n            return Array.from(this._set.values());\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DOMTokenList.prototype.toString = function () {\n        return Array.from(this._set.values()).join(' ');\n    };\n    return DOMTokenList;\n}());\n/**\n * HTMLElement, which contains a set of children.\n *\n * Note: this is a minimalist implementation, no complete tree\n *   structure provided (no parentNode, nextSibling,\n *   previousSibling etc).\n * @class HTMLElement\n * @extends {Node}\n */\nvar HTMLElement = /** @class */ (function (_super) {\n    __extends(HTMLElement, _super);\n    /**\n     * Creates an instance of HTMLElement.\n     * @param keyAttrs\tid and class attribute\n     * @param [rawAttrs]\tattributes in string\n     *\n     * @memberof HTMLElement\n     */\n    function HTMLElement(tagName, keyAttrs, rawAttrs, parentNode, range, voidTag, _parseOptions) {\n        if (rawAttrs === void 0) { rawAttrs = ''; }\n        if (parentNode === void 0) { parentNode = null; }\n        if (voidTag === void 0) { voidTag = new void_tag_1.default(); }\n        if (_parseOptions === void 0) { _parseOptions = {}; }\n        var _this = _super.call(this, parentNode, range) || this;\n        _this.rawAttrs = rawAttrs;\n        _this.voidTag = voidTag;\n        /**\n         * Node Type declaration.\n         */\n        _this.nodeType = type_1.default.ELEMENT_NODE;\n        _this.rawTagName = tagName;\n        _this.rawAttrs = rawAttrs || '';\n        _this.id = keyAttrs.id || '';\n        _this.childNodes = [];\n        _this._parseOptions = _parseOptions;\n        _this.classList = new DOMTokenList(keyAttrs.class ? keyAttrs.class.split(/\\s+/) : [], function (classList) { return _this.setAttribute('class', classList.toString()); } // eslint-disable-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call\n        );\n        if (keyAttrs.id) {\n            if (!rawAttrs) {\n                _this.rawAttrs = \"id=\\\"\".concat(keyAttrs.id, \"\\\"\");\n            }\n        }\n        if (keyAttrs.class) {\n            if (!rawAttrs) {\n                var cls = \"class=\\\"\".concat(_this.classList.toString(), \"\\\"\");\n                if (_this.rawAttrs) {\n                    _this.rawAttrs += \" \".concat(cls);\n                }\n                else {\n                    _this.rawAttrs = cls;\n                }\n            }\n        }\n        return _this;\n    }\n    /**\n     * Quote attribute values\n     * @param attr attribute value\n     * @returns {string} quoted value\n     */\n    HTMLElement.prototype.quoteAttribute = function (attr) {\n        if (attr == null) {\n            return 'null';\n        }\n        return JSON.stringify(attr.replace(/\"/g, '&quot;')).replace(/\\\\t/g, '\\t').replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r').replace(/\\\\/g, '');\n    };\n    /**\n     * Remove Child element from childNodes array\n     * @param {HTMLElement} node     node to remove\n     */\n    HTMLElement.prototype.removeChild = function (node) {\n        this.childNodes = this.childNodes.filter(function (child) {\n            return child !== node;\n        });\n        return this;\n    };\n    /**\n     * Exchanges given child with new child\n     * @param {HTMLElement} oldNode     node to exchange\n     * @param {HTMLElement} newNode     new node\n     */\n    HTMLElement.prototype.exchangeChild = function (oldNode, newNode) {\n        var children = this.childNodes;\n        this.childNodes = children.map(function (child) {\n            if (child === oldNode) {\n                return newNode;\n            }\n            return child;\n        });\n        return this;\n    };\n    Object.defineProperty(HTMLElement.prototype, \"tagName\", {\n        get: function () {\n            return this.rawTagName ? this.rawTagName.toUpperCase() : this.rawTagName;\n        },\n        set: function (newname) {\n            this.rawTagName = newname.toLowerCase();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"localName\", {\n        get: function () {\n            return this.rawTagName.toLowerCase();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"isVoidElement\", {\n        get: function () {\n            return this.voidTag.isVoidElement(this.localName);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"rawText\", {\n        /**\n         * Get escpaed (as-it) text value of current node and its children.\n         * @return {string} text content\n         */\n        get: function () {\n            // https://github.com/taoqf/node-html-parser/issues/249\n            if (/^br$/i.test(this.rawTagName)) {\n                return '\\n';\n            }\n            return this.childNodes.reduce(function (pre, cur) {\n                return (pre += cur.rawText);\n            }, '');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"textContent\", {\n        get: function () {\n            return decode(this.rawText);\n        },\n        set: function (val) {\n            var content = [new text_1.default(val, this)];\n            this.childNodes = content;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"text\", {\n        /**\n         * Get unescaped text value of current node and its children.\n         * @return {string} text content\n         */\n        get: function () {\n            return decode(this.rawText);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"structuredText\", {\n        /**\n         * Get structured Text (with '\\n' etc.)\n         * @return {string} structured text\n         */\n        get: function () {\n            var currentBlock = [];\n            var blocks = [currentBlock];\n            function dfs(node) {\n                if (node.nodeType === type_1.default.ELEMENT_NODE) {\n                    if (kBlockElements.has(node.rawTagName)) {\n                        if (currentBlock.length > 0) {\n                            blocks.push((currentBlock = []));\n                        }\n                        node.childNodes.forEach(dfs);\n                        if (currentBlock.length > 0) {\n                            blocks.push((currentBlock = []));\n                        }\n                    }\n                    else {\n                        node.childNodes.forEach(dfs);\n                    }\n                }\n                else if (node.nodeType === type_1.default.TEXT_NODE) {\n                    if (node.isWhitespace) {\n                        // Whitespace node, postponed output\n                        currentBlock.prependWhitespace = true;\n                    }\n                    else {\n                        var text = node.trimmedText;\n                        if (currentBlock.prependWhitespace) {\n                            text = \" \".concat(text);\n                            currentBlock.prependWhitespace = false;\n                        }\n                        currentBlock.push(text);\n                    }\n                }\n            }\n            dfs(this);\n            return blocks\n                .map(function (block) {\n                return block.join('').replace(/\\s{2,}/g, ' '); // Normalize each line's whitespace\n            })\n                .join('\\n')\n                .replace(/\\s+$/, ''); // trimRight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HTMLElement.prototype.toString = function () {\n        var tag = this.rawTagName;\n        if (tag) {\n            var attrs = this.rawAttrs ? \" \".concat(this.rawAttrs) : '';\n            return this.voidTag.formatNode(tag, attrs, this.innerHTML);\n        }\n        return this.innerHTML;\n    };\n    Object.defineProperty(HTMLElement.prototype, \"innerHTML\", {\n        get: function () {\n            return this.childNodes\n                .map(function (child) {\n                return child.toString();\n            })\n                .join('');\n        },\n        set: function (content) {\n            var r = parse(content, this._parseOptions);\n            var nodes = r.childNodes.length ? r.childNodes : [new text_1.default(content, this)];\n            resetParent(nodes, this);\n            resetParent(this.childNodes, null);\n            this.childNodes = nodes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HTMLElement.prototype.set_content = function (content, options) {\n        if (options === void 0) { options = {}; }\n        if (content instanceof node_1.default) {\n            content = [content];\n        }\n        else if (typeof content == 'string') {\n            options = __assign(__assign({}, this._parseOptions), options);\n            var r = parse(content, options);\n            content = r.childNodes.length ? r.childNodes : [new text_1.default(r.innerHTML, this)];\n        }\n        resetParent(this.childNodes, null);\n        resetParent(content, this);\n        this.childNodes = content;\n        return this;\n    };\n    HTMLElement.prototype.replaceWith = function () {\n        var _this = this;\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        var parent = this.parentNode;\n        var content = nodes\n            .map(function (node) {\n            if (node instanceof node_1.default) {\n                return [node];\n            }\n            else if (typeof node == 'string') {\n                var r = parse(node, _this._parseOptions);\n                return r.childNodes.length ? r.childNodes : [new text_1.default(node, _this)];\n            }\n            return [];\n        })\n            .flat();\n        var idx = parent.childNodes.findIndex(function (child) {\n            return child === _this;\n        });\n        resetParent([this], null);\n        parent.childNodes = __spreadArray(__spreadArray(__spreadArray([], parent.childNodes.slice(0, idx), true), resetParent(content, parent), true), parent.childNodes.slice(idx + 1), true);\n        return this;\n    };\n    Object.defineProperty(HTMLElement.prototype, \"outerHTML\", {\n        get: function () {\n            return this.toString();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Trim element from right (in block) after seeing pattern in a TextNode.\n     * @param  {RegExp} pattern pattern to find\n     * @return {HTMLElement}    reference to current node\n     */\n    HTMLElement.prototype.trimRight = function (pattern) {\n        for (var i = 0; i < this.childNodes.length; i++) {\n            var childNode = this.childNodes[i];\n            if (childNode.nodeType === type_1.default.ELEMENT_NODE) {\n                childNode.trimRight(pattern);\n            }\n            else {\n                var index = childNode.rawText.search(pattern);\n                if (index > -1) {\n                    childNode.rawText = childNode.rawText.substr(0, index);\n                    // trim all following nodes.\n                    this.childNodes.length = i + 1;\n                }\n            }\n        }\n        return this;\n    };\n    Object.defineProperty(HTMLElement.prototype, \"structure\", {\n        /**\n         * Get DOM structure\n         * @return {string} structure\n         */\n        get: function () {\n            var res = [];\n            var indention = 0;\n            function write(str) {\n                res.push('  '.repeat(indention) + str);\n            }\n            function dfs(node) {\n                var idStr = node.id ? \"#\".concat(node.id) : '';\n                var classStr = node.classList.length ? \".\".concat(node.classList.value.join('.')) : ''; // eslint-disable-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions, @typescript-eslint/no-unsafe-call\n                write(\"\".concat(node.rawTagName).concat(idStr).concat(classStr));\n                indention++;\n                node.childNodes.forEach(function (childNode) {\n                    if (childNode.nodeType === type_1.default.ELEMENT_NODE) {\n                        dfs(childNode);\n                    }\n                    else if (childNode.nodeType === type_1.default.TEXT_NODE) {\n                        if (!childNode.isWhitespace) {\n                            write('#text');\n                        }\n                    }\n                });\n                indention--;\n            }\n            dfs(this);\n            return res.join('\\n');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Remove whitespaces in this sub tree.\n     * @return {HTMLElement} pointer to this\n     */\n    HTMLElement.prototype.removeWhitespace = function () {\n        var _this = this;\n        var o = 0;\n        this.childNodes.forEach(function (node) {\n            if (node.nodeType === type_1.default.TEXT_NODE) {\n                if (node.isWhitespace) {\n                    return;\n                }\n                node.rawText = node.trimmedRawText;\n            }\n            else if (node.nodeType === type_1.default.ELEMENT_NODE) {\n                node.removeWhitespace();\n            }\n            _this.childNodes[o++] = node;\n        });\n        this.childNodes.length = o;\n        return this;\n    };\n    /**\n     * Query CSS selector to find matching nodes.\n     * @param  {string}         selector Simplified CSS selector\n     * @return {HTMLElement[]}  matching elements\n     */\n    HTMLElement.prototype.querySelectorAll = function (selector) {\n        return (0, css_select_1.selectAll)(selector, this, {\n            xmlMode: true,\n            adapter: matcher_1.default,\n        });\n    };\n    /**\n     * Query CSS Selector to find matching node.\n     * @param  {string}         selector Simplified CSS selector\n     * @return {(HTMLElement|null)}    matching node\n     */\n    HTMLElement.prototype.querySelector = function (selector) {\n        return (0, css_select_1.selectOne)(selector, this, {\n            xmlMode: true,\n            adapter: matcher_1.default,\n        });\n    };\n    /**\n     * find elements by their tagName\n     * @param {string} tagName the tagName of the elements to select\n     */\n    HTMLElement.prototype.getElementsByTagName = function (tagName) {\n        var upperCasedTagName = tagName.toUpperCase();\n        var re = [];\n        var stack = [];\n        var currentNodeReference = this;\n        var index = 0;\n        // index turns to undefined once the stack is empty and the first condition occurs\n        // which happens once all relevant children are searched through\n        while (index !== undefined) {\n            var child = void 0;\n            // make it work with sparse arrays\n            do {\n                child = currentNodeReference.childNodes[index++];\n            } while (index < currentNodeReference.childNodes.length && child === undefined);\n            // if the child does not exist we move on with the last provided index (which belongs to the parentNode)\n            if (child === undefined) {\n                currentNodeReference = currentNodeReference.parentNode;\n                index = stack.pop();\n                continue;\n            }\n            if (child.nodeType === type_1.default.ELEMENT_NODE) {\n                // https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName#syntax\n                if (tagName === '*' || child.tagName === upperCasedTagName)\n                    re.push(child);\n                // if children are existing push the current status to the stack and keep searching for elements in the level below\n                if (child.childNodes.length > 0) {\n                    stack.push(index);\n                    currentNodeReference = child;\n                    index = 0;\n                }\n            }\n        }\n        return re;\n    };\n    /**\n     * find element by it's id\n     * @param {string} id the id of the element to select\n     * @returns {HTMLElement | null} the element with the given id or null if not found\n     */\n    HTMLElement.prototype.getElementById = function (id) {\n        var stack = [];\n        var currentNodeReference = this;\n        var index = 0;\n        // index turns to undefined once the stack is empty and the first condition occurs\n        // which happens once all relevant children are searched through\n        while (index !== undefined) {\n            var child = void 0;\n            // make it work with sparse arrays\n            do {\n                child = currentNodeReference.childNodes[index++];\n            } while (index < currentNodeReference.childNodes.length && child === undefined);\n            // if the child does not exist we move on with the last provided index (which belongs to the parentNode)\n            if (child === undefined) {\n                currentNodeReference = currentNodeReference.parentNode;\n                index = stack.pop();\n                continue;\n            }\n            if (child.nodeType === type_1.default.ELEMENT_NODE) {\n                if (child.id === id) {\n                    return child;\n                }\n                ;\n                // if children are existing push the current status to the stack and keep searching for elements in the level below\n                if (child.childNodes.length > 0) {\n                    stack.push(index);\n                    currentNodeReference = child;\n                    index = 0;\n                }\n            }\n        }\n        return null;\n    };\n    /**\n     * traverses the Element and its parents (heading toward the document root) until it finds a node that matches the provided selector string. Will return itself or the matching ancestor. If no such element exists, it returns null.\n     * @param selector a DOMString containing a selector list\n     * @returns {HTMLElement | null} the element with the given id or null if not found\n     */\n    HTMLElement.prototype.closest = function (selector) {\n        var mapChild = new Map();\n        var el = this;\n        var old = null;\n        function findOne(test, elems) {\n            var elem = null;\n            for (var i = 0, l = elems.length; i < l && !elem; i++) {\n                var el_1 = elems[i];\n                if (test(el_1)) {\n                    elem = el_1;\n                }\n                else {\n                    var child = mapChild.get(el_1);\n                    if (child) {\n                        elem = findOne(test, [child]);\n                    }\n                }\n            }\n            return elem;\n        }\n        while (el) {\n            mapChild.set(el, old);\n            old = el;\n            el = el.parentNode;\n        }\n        el = this;\n        while (el) {\n            var e = (0, css_select_1.selectOne)(selector, el, {\n                xmlMode: true,\n                adapter: __assign(__assign({}, matcher_1.default), { getChildren: function (node) {\n                        var child = mapChild.get(node);\n                        return child && [child];\n                    }, getSiblings: function (node) {\n                        return [node];\n                    }, findOne: findOne, findAll: function () {\n                        return [];\n                    } }),\n            });\n            if (e) {\n                return e;\n            }\n            el = el.parentNode;\n        }\n        return null;\n    };\n    /**\n     * Append a child node to childNodes\n     * @param  {Node} node node to append\n     * @return {Node}      node appended\n     */\n    HTMLElement.prototype.appendChild = function (node) {\n        // remove the node from it's parent\n        node.remove();\n        this.childNodes.push(node);\n        node.parentNode = this;\n        return node;\n    };\n    Object.defineProperty(HTMLElement.prototype, \"firstChild\", {\n        /**\n         * Get first child node\n         * @return {Node | undefined} first child node; or undefined if none\n         */\n        get: function () {\n            return this.childNodes[0];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"lastChild\", {\n        /**\n         * Get last child node\n         * @return {Node | undefined} last child node; or undefined if none\n         */\n        get: function () {\n            return (0, back_1.default)(this.childNodes);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"attrs\", {\n        /**\n         * Get attributes\n         * @access private\n         * @return {Object} parsed and unescaped attributes\n         */\n        get: function () {\n            if (this._attrs) {\n                return this._attrs;\n            }\n            this._attrs = {};\n            var attrs = this.rawAttributes;\n            for (var key in attrs) {\n                var val = attrs[key] || '';\n                this._attrs[key.toLowerCase()] = decode(val);\n            }\n            return this._attrs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"attributes\", {\n        get: function () {\n            var ret_attrs = {};\n            var attrs = this.rawAttributes;\n            for (var key in attrs) {\n                var val = attrs[key] || '';\n                ret_attrs[key] = decode(val);\n            }\n            return ret_attrs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"rawAttributes\", {\n        /**\n         * Get escaped (as-is) attributes\n         * @return {Object} parsed attributes\n         */\n        get: function () {\n            if (this._rawAttrs) {\n                return this._rawAttrs;\n            }\n            var attrs = {};\n            if (this.rawAttrs) {\n                var re = /([a-zA-Z()[\\]#@$.?:][a-zA-Z0-9-_:()[\\]#]*)(?:\\s*=\\s*((?:'[^']*')|(?:\"[^\"]*\")|\\S+))?/g;\n                var match = void 0;\n                while ((match = re.exec(this.rawAttrs))) {\n                    var key = match[1];\n                    var val = match[2] || null;\n                    if (val && (val[0] === \"'\" || val[0] === \"\\\"\"))\n                        val = val.slice(1, val.length - 1);\n                    attrs[key] = attrs[key] || val;\n                }\n            }\n            this._rawAttrs = attrs;\n            return attrs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HTMLElement.prototype.removeAttribute = function (key) {\n        var _this = this;\n        var attrs = this.rawAttributes;\n        delete attrs[key];\n        // Update this.attribute\n        if (this._attrs) {\n            delete this._attrs[key];\n        }\n        // Update rawString\n        this.rawAttrs = Object.keys(attrs)\n            .map(function (name) {\n            var val = _this.quoteAttribute(attrs[name]);\n            if (val === 'null' || val === '\"\"')\n                return name;\n            return \"\".concat(name, \"=\").concat(val);\n        })\n            .join(' ');\n        // Update this.id\n        if (key === 'id') {\n            this.id = '';\n        }\n        return this;\n    };\n    HTMLElement.prototype.hasAttribute = function (key) {\n        return key.toLowerCase() in this.attrs;\n    };\n    /**\n     * Get an attribute\n     * @return {string | undefined} value of the attribute; or undefined if not exist\n     */\n    HTMLElement.prototype.getAttribute = function (key) {\n        return this.attrs[key.toLowerCase()];\n    };\n    /**\n     * Set an attribute value to the HTMLElement\n     * @param {string} key The attribute name\n     * @param {string} value The value to set, or null / undefined to remove an attribute\n     */\n    HTMLElement.prototype.setAttribute = function (key, value) {\n        var _this = this;\n        if (arguments.length < 2) {\n            throw new Error(\"Failed to execute 'setAttribute' on 'Element'\");\n        }\n        var k2 = key.toLowerCase();\n        var attrs = this.rawAttributes;\n        for (var k in attrs) {\n            if (k.toLowerCase() === k2) {\n                key = k;\n                break;\n            }\n        }\n        attrs[key] = String(value);\n        // update this.attrs\n        if (this._attrs) {\n            this._attrs[k2] = decode(attrs[key]);\n        }\n        // Update rawString\n        this.rawAttrs = Object.keys(attrs)\n            .map(function (name) {\n            var val = _this.quoteAttribute(attrs[name]);\n            if (val === 'null' || val === '\"\"')\n                return name;\n            return \"\".concat(name, \"=\").concat(val);\n        })\n            .join(' ');\n        // Update this.id\n        if (key === 'id') {\n            this.id = value;\n        }\n        return this;\n    };\n    /**\n     * Replace all the attributes of the HTMLElement by the provided attributes\n     * @param {Attributes} attributes the new attribute set\n     */\n    HTMLElement.prototype.setAttributes = function (attributes) {\n        var _this = this;\n        // Invalidate current this.attributes\n        if (this._attrs) {\n            delete this._attrs;\n        }\n        // Invalidate current this.rawAttributes\n        if (this._rawAttrs) {\n            delete this._rawAttrs;\n        }\n        // Update rawString\n        this.rawAttrs = Object.keys(attributes)\n            .map(function (name) {\n            var val = attributes[name];\n            if (val === 'null' || val === '\"\"')\n                return name;\n            return \"\".concat(name, \"=\").concat(_this.quoteAttribute(String(val)));\n        })\n            .join(' ');\n        return this;\n    };\n    HTMLElement.prototype.insertAdjacentHTML = function (where, html) {\n        var _a, _b, _c;\n        var _this = this;\n        if (arguments.length < 2) {\n            throw new Error('2 arguments required');\n        }\n        var p = parse(html, this._parseOptions);\n        if (where === 'afterend') {\n            var idx = this.parentNode.childNodes.findIndex(function (child) {\n                return child === _this;\n            });\n            resetParent(p.childNodes, this.parentNode);\n            (_a = this.parentNode.childNodes).splice.apply(_a, __spreadArray([idx + 1, 0], p.childNodes, false));\n        }\n        else if (where === 'afterbegin') {\n            resetParent(p.childNodes, this);\n            (_b = this.childNodes).unshift.apply(_b, p.childNodes);\n        }\n        else if (where === 'beforeend') {\n            p.childNodes.forEach(function (n) {\n                _this.appendChild(n);\n            });\n        }\n        else if (where === 'beforebegin') {\n            var idx = this.parentNode.childNodes.findIndex(function (child) {\n                return child === _this;\n            });\n            resetParent(p.childNodes, this.parentNode);\n            (_c = this.parentNode.childNodes).splice.apply(_c, __spreadArray([idx, 0], p.childNodes, false));\n        }\n        else {\n            throw new Error(\"The value provided ('\".concat(where, \"') is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'\"));\n        }\n        return this;\n        // if (!where || html === undefined || html === null) {\n        // \treturn;\n        // }\n    };\n    Object.defineProperty(HTMLElement.prototype, \"nextSibling\", {\n        get: function () {\n            if (this.parentNode) {\n                var children = this.parentNode.childNodes;\n                var i = 0;\n                while (i < children.length) {\n                    var child = children[i++];\n                    if (this === child)\n                        return children[i] || null;\n                }\n                return null;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"nextElementSibling\", {\n        get: function () {\n            if (this.parentNode) {\n                var children = this.parentNode.childNodes;\n                var i = 0;\n                var find = false;\n                while (i < children.length) {\n                    var child = children[i++];\n                    if (find) {\n                        if (child instanceof HTMLElement) {\n                            return child || null;\n                        }\n                    }\n                    else if (this === child) {\n                        find = true;\n                    }\n                }\n                return null;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"previousSibling\", {\n        get: function () {\n            if (this.parentNode) {\n                var children = this.parentNode.childNodes;\n                var i = children.length;\n                while (i > 0) {\n                    var child = children[--i];\n                    if (this === child)\n                        return children[i - 1] || null;\n                }\n                return null;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"previousElementSibling\", {\n        get: function () {\n            if (this.parentNode) {\n                var children = this.parentNode.childNodes;\n                var i = children.length;\n                var find = false;\n                while (i > 0) {\n                    var child = children[--i];\n                    if (find) {\n                        if (child instanceof HTMLElement) {\n                            return child || null;\n                        }\n                    }\n                    else if (this === child) {\n                        find = true;\n                    }\n                }\n                return null;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HTMLElement.prototype, \"classNames\", {\n        get: function () {\n            return this.classList.toString();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Clone this Node\n     */\n    HTMLElement.prototype.clone = function () {\n        return parse(this.toString(), this._parseOptions).firstChild;\n    };\n    return HTMLElement;\n}(node_1.default));\nexports.default = HTMLElement;\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nvar kMarkupPattern = /<!--[\\s\\S]*?-->|<(\\/?)([a-zA-Z][-.:0-9_a-zA-Z]*)((?:\\s+[^>]*?(?:(?:'[^']*')|(?:\"[^\"]*\"))?)*)\\s*(\\/?)>/g;\nvar kAttributePattern = /(?:^|\\s)(id|class)\\s*=\\s*((?:'[^']*')|(?:\"[^\"]*\")|\\S+)/gi;\nvar kElementsClosedByOpening = {\n    li: { li: true, LI: true },\n    LI: { li: true, LI: true },\n    p: { p: true, div: true, P: true, DIV: true },\n    P: { p: true, div: true, P: true, DIV: true },\n    b: { div: true, DIV: true },\n    B: { div: true, DIV: true },\n    td: { td: true, th: true, TD: true, TH: true },\n    TD: { td: true, th: true, TD: true, TH: true },\n    th: { td: true, th: true, TD: true, TH: true },\n    TH: { td: true, th: true, TD: true, TH: true },\n    h1: { h1: true, H1: true },\n    H1: { h1: true, H1: true },\n    h2: { h2: true, H2: true },\n    H2: { h2: true, H2: true },\n    h3: { h3: true, H3: true },\n    H3: { h3: true, H3: true },\n    h4: { h4: true, H4: true },\n    H4: { h4: true, H4: true },\n    h5: { h5: true, H5: true },\n    H5: { h5: true, H5: true },\n    h6: { h6: true, H6: true },\n    H6: { h6: true, H6: true },\n};\nvar kElementsClosedByClosing = {\n    li: { ul: true, ol: true, UL: true, OL: true },\n    LI: { ul: true, ol: true, UL: true, OL: true },\n    a: { div: true, DIV: true },\n    A: { div: true, DIV: true },\n    b: { div: true, DIV: true },\n    B: { div: true, DIV: true },\n    i: { div: true, DIV: true },\n    I: { div: true, DIV: true },\n    p: { div: true, DIV: true },\n    P: { div: true, DIV: true },\n    td: { tr: true, table: true, TR: true, TABLE: true },\n    TD: { tr: true, table: true, TR: true, TABLE: true },\n    th: { tr: true, table: true, TR: true, TABLE: true },\n    TH: { tr: true, table: true, TR: true, TABLE: true },\n};\nvar frameflag = 'documentfragmentcontainer';\n/**\n * Parses HTML and returns a root element\n * Parse a chuck of HTML source.\n * @param  {string} data      html\n * @return {HTMLElement}      root element\n */\nfunction base_parse(data, options) {\n    var _a, _b;\n    if (options === void 0) { options = {}; }\n    var voidTag = new void_tag_1.default((_a = options === null || options === void 0 ? void 0 : options.voidTag) === null || _a === void 0 ? void 0 : _a.closingSlash, (_b = options === null || options === void 0 ? void 0 : options.voidTag) === null || _b === void 0 ? void 0 : _b.tags);\n    var elements = options.blockTextElements || {\n        script: true,\n        noscript: true,\n        style: true,\n        pre: true,\n    };\n    var element_names = Object.keys(elements);\n    var kBlockTextElements = element_names.map(function (it) { return new RegExp(\"^\".concat(it, \"$\"), 'i'); });\n    var kIgnoreElements = element_names.filter(function (it) { return Boolean(elements[it]); }).map(function (it) { return new RegExp(\"^\".concat(it, \"$\"), 'i'); });\n    function element_should_be_ignore(tag) {\n        return kIgnoreElements.some(function (it) { return it.test(tag); });\n    }\n    function is_block_text_element(tag) {\n        return kBlockTextElements.some(function (it) { return it.test(tag); });\n    }\n    var createRange = function (startPos, endPos) { return [startPos - frameFlagOffset, endPos - frameFlagOffset]; };\n    var root = new HTMLElement(null, {}, '', null, [0, data.length], voidTag, options);\n    var currentParent = root;\n    var stack = [root];\n    var lastTextPos = -1;\n    var noNestedTagIndex = undefined;\n    var match;\n    // https://github.com/taoqf/node-html-parser/issues/38\n    data = \"<\".concat(frameflag, \">\").concat(data, \"</\").concat(frameflag, \">\");\n    var lowerCaseTagName = options.lowerCaseTagName, fixNestedATags = options.fixNestedATags;\n    var dataEndPos = data.length - (frameflag.length + 2);\n    var frameFlagOffset = frameflag.length + 2;\n    while ((match = kMarkupPattern.exec(data))) {\n        // Note: Object destructuring here consistently tests as higher performance than array destructuring\n        // eslint-disable-next-line prefer-const\n        var matchText = match[0], leadingSlash = match[1], tagName = match[2], attributes = match[3], closingSlash = match[4];\n        var matchLength = matchText.length;\n        var tagStartPos = kMarkupPattern.lastIndex - matchLength;\n        var tagEndPos = kMarkupPattern.lastIndex;\n        // Add TextNode if content\n        if (lastTextPos > -1) {\n            if (lastTextPos + matchLength < tagEndPos) {\n                var text = data.substring(lastTextPos, tagStartPos);\n                currentParent.appendChild(new text_1.default(text, currentParent, createRange(lastTextPos, tagStartPos)));\n            }\n        }\n        lastTextPos = kMarkupPattern.lastIndex;\n        // https://github.com/taoqf/node-html-parser/issues/38\n        // Skip frameflag node\n        if (tagName === frameflag)\n            continue;\n        // Handle comments\n        if (matchText[1] === '!') {\n            if (options.comment) {\n                // Only keep what is in between <!-- and -->\n                var text = data.substring(tagStartPos + 4, tagEndPos - 3);\n                currentParent.appendChild(new comment_1.default(text, currentParent, createRange(tagStartPos, tagEndPos)));\n            }\n            continue;\n        }\n        /* -- Handle tag matching -- */\n        // Fix tag casing if necessary\n        if (lowerCaseTagName)\n            tagName = tagName.toLowerCase();\n        // Handle opening tags (ie. <this> not </that>)\n        if (!leadingSlash) {\n            /* Populate attributes */\n            var attrs = {};\n            for (var attMatch = void 0; (attMatch = kAttributePattern.exec(attributes));) {\n                var key = attMatch[1], val = attMatch[2];\n                var isQuoted = val[0] === \"'\" || val[0] === \"\\\"\";\n                attrs[key.toLowerCase()] = isQuoted ? val.slice(1, val.length - 1) : val;\n            }\n            var parentTagName = currentParent.rawTagName;\n            if (!closingSlash && kElementsClosedByOpening[parentTagName]) {\n                if (kElementsClosedByOpening[parentTagName][tagName]) {\n                    stack.pop();\n                    currentParent = (0, back_1.default)(stack);\n                }\n            }\n            // Prevent nested A tags by terminating the last A and starting a new one : see issue #144\n            if (fixNestedATags && (tagName === 'a' || tagName === 'A')) {\n                if (noNestedTagIndex !== undefined) {\n                    stack.splice(noNestedTagIndex);\n                    currentParent = (0, back_1.default)(stack);\n                }\n                noNestedTagIndex = stack.length;\n            }\n            var tagEndPos_1 = kMarkupPattern.lastIndex;\n            var tagStartPos_1 = tagEndPos_1 - matchLength;\n            currentParent = currentParent.appendChild(\n            // Initialize range (end position updated later for closed tags)\n            new HTMLElement(tagName, attrs, attributes.slice(1), null, createRange(tagStartPos_1, tagEndPos_1), voidTag, options));\n            stack.push(currentParent);\n            if (is_block_text_element(tagName)) {\n                // Find closing tag\n                var closeMarkup = \"</\".concat(tagName, \">\");\n                var closeIndex = lowerCaseTagName\n                    ? data.toLocaleLowerCase().indexOf(closeMarkup, kMarkupPattern.lastIndex)\n                    : data.indexOf(closeMarkup, kMarkupPattern.lastIndex);\n                var textEndPos = closeIndex === -1 ? dataEndPos : closeIndex;\n                if (element_should_be_ignore(tagName)) {\n                    var text = data.substring(tagEndPos_1, textEndPos);\n                    if (text.length > 0 && /\\S/.test(text)) {\n                        currentParent.appendChild(new text_1.default(text, currentParent, createRange(tagEndPos_1, textEndPos)));\n                    }\n                }\n                if (closeIndex === -1) {\n                    lastTextPos = kMarkupPattern.lastIndex = data.length + 1;\n                }\n                else {\n                    lastTextPos = kMarkupPattern.lastIndex = closeIndex + closeMarkup.length;\n                    // Cause to be treated as self-closing, because no close found\n                    leadingSlash = '/';\n                }\n            }\n        }\n        // Handle closing tags or self-closed elements (ie </tag> or <br>)\n        if (leadingSlash || closingSlash || voidTag.isVoidElement(tagName)) {\n            while (true) {\n                if (noNestedTagIndex != null && (tagName === 'a' || tagName === 'A'))\n                    noNestedTagIndex = undefined;\n                if (currentParent.rawTagName === tagName) {\n                    // Update range end for closed tag\n                    currentParent.range[1] = createRange(-1, Math.max(lastTextPos, tagEndPos))[1];\n                    stack.pop();\n                    currentParent = (0, back_1.default)(stack);\n                    break;\n                }\n                else {\n                    var parentTagName = currentParent.tagName;\n                    // Trying to close current tag, and move on\n                    if (kElementsClosedByClosing[parentTagName]) {\n                        if (kElementsClosedByClosing[parentTagName][tagName]) {\n                            stack.pop();\n                            currentParent = (0, back_1.default)(stack);\n                            continue;\n                        }\n                    }\n                    // Use aggressive strategy to handle unmatching markups.\n                    break;\n                }\n            }\n        }\n    }\n    return stack;\n}\nexports.base_parse = base_parse;\n/**\n * Parses HTML and returns a root element\n * Parse a chuck of HTML source.\n */\nfunction parse(data, options) {\n    if (options === void 0) { options = {}; }\n    var stack = base_parse(data, options);\n    var root = stack[0];\n    var _loop_1 = function () {\n        // Handle each error elements.\n        var last = stack.pop();\n        var oneBefore = (0, back_1.default)(stack);\n        if (last.parentNode && last.parentNode.parentNode) {\n            if (last.parentNode === oneBefore && last.tagName === oneBefore.tagName) {\n                // Pair error case <h3> <h3> handle : Fixes to <h3> </h3>\n                // this is wrong, becouse this will put the H3 outside the current right position which should be inside the current Html Element, see issue 152 for more info\n                if (options.parseNoneClosedTags !== true) {\n                    oneBefore.removeChild(last);\n                    last.childNodes.forEach(function (child) {\n                        oneBefore.parentNode.appendChild(child);\n                    });\n                    stack.pop();\n                }\n            }\n            else {\n                // Single error  <div> <h3> </div> handle: Just removes <h3>\n                // Why remove? this is already a HtmlElement and the missing <H3> is already added in this case. see issue 152 for more info\n                // eslint-disable-next-line no-lonely-if\n                if (options.parseNoneClosedTags !== true) {\n                    oneBefore.removeChild(last);\n                    last.childNodes.forEach(function (child) {\n                        oneBefore.appendChild(child);\n                    });\n                }\n            }\n        }\n        else {\n            // If it's final element just skip.\n        }\n    };\n    while (stack.length > 1) {\n        _loop_1();\n    }\n    // response.childNodes.forEach((node) => {\n    // \tif (node instanceof HTMLElement) {\n    // \t\tnode.parentNode = null;\n    // \t}\n    // });\n    return root;\n}\nexports.parse = parse;\nfunction resetParent(nodes, parent) {\n    return nodes.map(function (node) {\n        node.parentNode = parent;\n        return node;\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}